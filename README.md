# naraka_bladepoint_music

永劫无间 乐器熟练度速刷 可过考核

原理：图像检测与键鼠模拟

## 注意

1. 必须以**管理员权限**运行该程序
2. 不允许多开（同时运行多个）该程序
3. 受帧率等因素影响，**必须必须必须**按照该程序在自己电脑上的实际运行情况，**修改**`config.yaml`中的`key_delay`。（可以点击配置按钮来打开`config.yaml`）
4. 由于游戏内F1、F3、F6分别绑定了游戏内置操作，所以本程序用到某个功能时，可能需要按下对应按键两次。比如先按F6会使用本程序的”扫描-梆子“功能，同时会打开游戏内的拍照模式，所以需要再次按下F6来取消游戏内的拍照模式。
5. 有条件的话还是推荐运行`python3 console.py`，而不是直接用带UI的程序。UI程序会导致按键延迟更大一些。而且控制台程序可以便捷地观察脚本有无错误发生（比如按F1有没有成功停止脚本）。

## 按键

| 快捷键    | 功能 | 备注             |
| --------- | ---- | ---------------- |
| 扫描-古筝 | F3   |                  |
| 扫描-通用 | F4   | 二胡、曲笛、唢呐 |
| 扫描-疆鼓 | F5   |                  |
| 扫描-梆子 | F6   |                  |
| 扫描-锣   | F7   |                  |
| 循环-古筝 | F8   |                  |
| 循环-通用 | F9   | 二胡、曲笛、唢呐 |
| 循环-疆鼓 | F10  |                  |
| 循环-梆子 | F11  |                  |
| 循环-锣   | F12  |                  |
| 结束      | F1   |                  |

 ## 模式

### 扫描

没有其他操作，纯粹地扫描画面，根据OCR结果，按下对应按键。

考核需要用这个模式。

### 循环

站在乐器旁边，屏幕中需要显示E键。

开启后，自动选择《专家-天选》进行演奏。每演奏一曲，都会调用一次扫描模式。演奏两次后退出，然后重复以上流程。

刷乐器熟练度适合用这个模式。

注意：循环模式为了适配游戏内站在乐器旁边长按E有概率没有反应的BUG，选择了尝试多次长按E，所以可能会出现已经进入乐器界面却还在长按E的画面，耐心等一会就行，大概十几秒左右。

## 其他

1. 按F1如果停不下来，可以多按几次。
2. 如果仍然感觉程序运行不对劲，推荐重新运行程序。
3. 这个程序本来是想自己用，小bug不想再花额外的时间修复（我自己用的话控制台就可以的，本来不想写UI的）